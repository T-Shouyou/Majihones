{% extends 'base.html' %}

{% block title %}ごはん広場{% endblock %}

{% block content %}
    <link rel="stylesheet" href="style.css">

    <br><br>
    <h1 class="txt-center">ごはん広場</h1>

    <h2 class="txt-center">投稿された内容</h2>

    <div class="posts">
        {% for post in posts %}
        <div class="post">
            <hr>
            <p class="post-txt">
                <strong>投稿者名:</strong> {{ post.account_name }}
                {% if account_id == 1 or post.account_id == account_id %}
                <button onclick="showDeleteButton(this)">編集</button>
                <button class="delete-button" style="display:none;">削除</button>
                {% endif %}
            </p>
            <hr>
            <div class="post-content">
                {% if post.photo %}
                <img src="{{ url_for('static', filename='hiroba_img/' + post.photo) }}" alt="投稿画像" class="post-img">
                {% endif %}
                <p class="post-txt">{{ post.sentence }}</p>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="fixed-button">
        <button onclick="location.href='{{ url_for('mainmenu') }}';" class="main-button">メイン<br>メニュー</button>
        <button onclick="location.href='{{ url_for('post_gohan') }}';" class="main-button">ごはん投稿</button>
    </div>

    <script>
        function showDeleteButton(button) {
            const postElement = button.parentNode;
            const deleteButton = postElement.querySelector('.delete-button');
            deleteButton.style.display = 'inline';
        }
    </script>
{% endblock %}
